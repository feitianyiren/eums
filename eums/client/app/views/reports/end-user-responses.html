<div class="container-fluid">
    <div class="content" ng-init="initialize()">
        <h4 class="page-header">End User Feedback Report
        </h4>

        <div class="row pad-20">
            <div class="form-inline">
                <div class="form-group col-lg-3">
                    <label for="select-sales-order" class="control-label description-label col-lg-12">
                        Outcome:
                    </label>

                    <select required="required"
                            class="form-control responses-select"
                            data-placeholder="Choose Outcome"
                            chosen
                            ng-model="selectedProgramme"
                            ng-change="selectProgramme()"
                            ng-options="programmes.name for programmes in programmes track by programmes.id">
                        <option value=""></option>
                    </select>
                </div>
                <div class="form-group col-lg-3">
                    <label for="select-sales-order" class="control-label description-label col-lg-12">
                        Implementing Partner:
                    </label>

                    <select required="required"
                            class="form-control responses-select"
                            data-placeholder="Choose IP"
                            chosen
                            ng-model="selectedConsignee"
                            ng-change="selectConsignee()"
                            ng-options="consignee.name for consignee in consignees track by consignee.id">
                        <option value=""></option>
                    </select>
                </div>
                <div class="form-group col-lg-3">
                    <label for="select-purchase-order" class="control-label description-label col-lg-12">
                        Purchase Order:
                    </label>

                    <select required="required"
                            class="form-control responses-select"
                            data-placeholder="Choose Purchase Order"
                            chosen
                            ng-model="selectedPurchaseOrder"
                            ng-change="selectPurchaseOrder()"
                            ng-options="purchaseOrder.orderNumber for purchaseOrder in purchaseOrders track by purchaseOrder.id">
                        <option value=""></option>
                    </select>
                </div>
                <div class="form-group col-lg-3">
                    <label for="select-sales-order" class="control-label description-label col-lg-12">
                        Item:
                    </label>

                    <select required="required"
                            class="form-control responses-select"
                            data-placeholder="Choose Item"
                            chosen
                            ng-model="selectedItem"
                            ng-change="selectItem()"
                            ng-options="item.description for item in items track by item.id">
                        <option value=""></option>
                    </select>
                </div>
            </div>
        </div>


        <div class="table-wrapper">
            <table si-table class="table table-bordered table-hover table-striped table-condensed">
                <thead>
                <tr>
                    <th class="table-header">Item Description</th>
                    <th class="table-header">Outcome</th>
                    <th class="table-header">Implementing Partner</th>
                    <th class="table-header">Purchase Order</th>
                    <th class="table-header table-header-end-user">End User</th>
                    <th class="table-header">Item Received</th>
                    <th class="table-header">Date Received</th>
                    <th class="table-header">Quantity Sent</th>
                    <th class="table-header">Quantity Received</th>
                    <th class="table-header">Quality of Product</th>
                    <th class="table-header">Satisfied?</th>
                </tr>
                </thead>

                <tbody>
                <tr ng-repeat="response in filteredResponses">
                    <td class="table-body">{{ response.item }}</td>
                    <td class="table-body">{{ response.programme.name }}</td>
                    <td class="table-body">{{ response.consignee.name }}</td>
                    <td class="table-body"><a ng-click="clickPurchaseOrder(response.purchase_order)">{{ response.purchase_order.orderNumber }}</a></td>
                    <td class="table-body">
                        <span class="table-body-end-user">{{ response.contact_person.firstName }} {{ response.contact_person.lastName }}</span>
                        <a custom-popover class="btn btn-default btn-xs glyphicon glyphicon-earphone pull-right"
                           ng-show="response.contact_person.phone" popover-html="{{ response.contact_person.phone }}"></a>
                    </td>
                    <td class="table-body">{{ response.productReceived }}</td>
                    <td class="table-body">{{ response.dateOfReceipt }}</td>
                    <td class="table-body">{{ response.amountSent }}</td>
                    <td class="table-body">{{ response.amountReceived || '0' }}</td>
                    <td class="table-body">{{ response.qualityOfProduct }}</td>
                    <td class="table-body">{{ response.satisfiedWithProduct }}</td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <td colspan="11">
                        <si-table-pagination limit="20" indices="3"></si-table-pagination>
                    </td>
                </tr>
                </tfoot>
            </table>
        </div>
        <!-- END TABLE -->
    </div>
</div>
</div>
